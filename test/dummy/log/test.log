

Started GET "/" for 127.0.0.1 at 2012-11-15 11:56:32 -0600


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-15 12:59:56 -0600


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-15 13:35:43 -0600


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-15 13:36:15 -0600


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-15 13:36:42 -0600


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-15 13:37:15 -0600


Started GET "/stripe/info" for 127.0.0.1 at 2012-11-15 13:37:39 -0600


Started GET "/stripe/info" for 127.0.0.1 at 2012-11-15 13:37:56 -0600


Started GET "/stripe/info" for 127.0.0.1 at 2012-11-15 13:38:21 -0600
Processing by Stripe::InfosController#show as HTML
Completed 406 Not Acceptable in 0ms


Started GET "/stripe/info" for 127.0.0.1 at 2012-11-15 13:38:59 -0600
Processing by Stripe::InfosController#show as HTML
Completed 406 Not Acceptable in 1ms


Started GET "/stripe/info" for 127.0.0.1 at 2012-11-15 13:39:21 -0600
Processing by Stripe::InfosController#show as HTML
Completed 406 Not Acceptable in 0ms


Started GET "/stripe/info" for 127.0.0.1 at 2012-11-15 13:39:28 -0600
Processing by Stripe::InfosController#show as HTML
Completed 406 Not Acceptable in 0ms


Started GET "/stripe/info" for 127.0.0.1 at 2012-11-15 13:39:34 -0600
Processing by Stripe::InfosController#show as HTML
Completed 406 Not Acceptable in 0ms


Started GET "/stripe/info" for 127.0.0.1 at 2012-11-15 13:48:53 -0600
Processing by Stripe::InfosController#show as HTML
Completed 406 Not Acceptable in 0ms


Started GET "/stripe/info" for 127.0.0.1 at 2012-11-15 13:49:43 -0600
Processing by Stripe::InfosController#show as HTML
Completed 406 Not Acceptable in 0ms


Started GET "/stripe/info" for 127.0.0.1 at 2012-11-15 13:51:12 -0600
Processing by Stripe::InfosController#show as HTML
Completed 406 Not Acceptable in 0ms


Started GET "/stripe/info" for 127.0.0.1 at 2012-11-15 13:52:45 -0600
Processing by Stripe::InfosController#show as HTML
Completed 406 Not Acceptable in 0ms


Started GET "/stripe/info" for 127.0.0.1 at 2012-11-15 13:53:09 -0600
Processing by Stripe::InfosController#show as HTML
Completed 406 Not Acceptable in 0ms


Started GET "/stripe/info" for 127.0.0.1 at 2012-11-15 13:53:19 -0600
Processing by Stripe::InfosController#show as HTML
Completed 406 Not Acceptable in 0ms


Started GET "/stripe/info" for 127.0.0.1 at 2012-11-15 13:53:26 -0600
Processing by Stripe::InfosController#show as HTML
Completed 406 Not Acceptable in 0ms


Started GET "/stripe/info" for 127.0.0.1 at 2012-11-15 13:54:59 -0600
Processing by Stripe::InfosController#show as JSON
  Parameters: {"info"=>{}}
Completed 200 OK in 11ms (Views: 0.2ms)


Started GET "/stripe/info" for 127.0.0.1 at 2012-11-15 13:55:31 -0600
Processing by Stripe::InfosController#show as JSON
  Parameters: {"info"=>{}}
Completed 200 OK in 9ms (Views: 0.2ms)


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-15 13:56:06 -0600


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-15 13:57:49 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 9ms (Views: 0.2ms)


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-15 13:58:10 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 9ms (Views: 0.2ms)


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-15 14:02:51 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 9ms (Views: 0.2ms)


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-15 14:02:59 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 9ms (Views: 0.2ms)


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-15 14:32:50 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 13ms (Views: 0.3ms)


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-15 15:08:28 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 11ms (Views: 0.2ms)


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-15 15:09:30 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 10ms (Views: 0.3ms)


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-15 15:10:07 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 10ms (Views: 0.2ms)


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-15 15:10:36 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 10ms (Views: 0.2ms)


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-15 15:11:07 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 10ms (Views: 0.2ms)


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-15 15:11:51 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 11ms (Views: 0.4ms)


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-16 06:03:51 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 11ms (Views: 0.2ms)


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-16 06:04:08 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 10ms (Views: 0.2ms)


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-16 06:05:05 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 11ms (Views: 0.2ms)


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-16 06:14:12 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 12ms (Views: 0.2ms)


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-16 06:14:40 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 22ms (Views: 0.2ms)


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-16 06:14:53 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 10ms (Views: 0.2ms)


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-16 06:15:12 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 10ms (Views: 0.2ms)


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-16 06:15:45 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 13ms (Views: 0.2ms)


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-16 06:16:57 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 13ms (Views: 0.3ms)


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-16 06:20:16 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 10ms (Views: 0.2ms)


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-16 06:20:50 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 12ms (Views: 0.3ms)


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-16 06:31:34 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 10ms (Views: 0.2ms)


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-16 06:31:52 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 11ms (Views: 0.4ms)


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-16 06:41:30 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 11ms (Views: 0.2ms)


Started POST "/stripe/" for 127.0.0.1 at 2012-11-16 06:41:30 -0600


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-16 06:43:47 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 9ms (Views: 0.2ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-16 06:43:47 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 500 Internal Server Error in 0ms


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-16 06:51:03 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 10ms (Views: 0.2ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-16 06:51:03 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 500 Internal Server Error in 0ms


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-16 13:00:04 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 11ms (Views: 0.2ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-16 13:00:04 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 500 Internal Server Error in 0ms


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-16 13:07:26 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 10ms (Views: 0.2ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-16 13:07:26 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 500 Internal Server Error in 7ms


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-16 13:08:08 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 10ms (Views: 0.2ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-16 13:08:09 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 500 Internal Server Error in 6ms


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-16 13:08:28 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 13ms (Views: 0.3ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-16 13:08:28 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 500 Internal Server Error in 48ms


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-16 13:08:57 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 11ms (Views: 0.2ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-16 13:08:57 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 500 Internal Server Error in 23ms


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-16 13:09:38 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 11ms (Views: 0.3ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-16 13:09:38 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 500 Internal Server Error in 43ms


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-16 13:09:52 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 10ms (Views: 0.2ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-16 13:09:53 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 500 Internal Server Error in 13ms


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-16 13:10:02 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 10ms (Views: 0.2ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-16 13:10:02 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 500 Internal Server Error in 3ms


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-16 13:10:14 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 10ms (Views: 0.2ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-16 13:10:14 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 201 Created in 8ms (Views: 3.8ms)


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-16 13:10:44 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 10ms (Views: 0.2ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-16 13:10:44 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 201 Created in 7ms (Views: 3.3ms)


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-16 13:10:57 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 10ms (Views: 0.2ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-16 13:10:57 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 201 Created in 9ms (Views: 3.5ms)


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-16 13:11:48 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 11ms (Views: 0.2ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-16 13:11:48 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 201 Created in 7ms (Views: 3.4ms)


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-16 13:21:12 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 10ms (Views: 0.2ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-16 13:21:12 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 500 Internal Server Error in 3ms


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-16 13:21:28 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 9ms (Views: 0.2ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-16 13:21:28 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
undefined method `call' for #<Array:0x00000100ba2e98>
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:21:in `block in run_noncritical_callbacks'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:19:in `each'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:19:in `run_noncritical_callbacks'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:8:in `block in dispatch'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:6:in `tap'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:6:in `dispatch'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/controllers/stripe/events_controller.rb:6:in `create'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:403:in `_run__35308357621751458__process_action__2853552061998018843__callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal.rb:203:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal.rb:246:in `block in action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:36:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:30:in `method_missing'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/etag.rb:23:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/conditionalget.rb:35:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:205:in `context'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:200:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/cookies.rb:339:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__605769560262542800__call__2255974429930303784__callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/runtime.rb:17:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/lock.rb:15:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/mock_session.rb:30:in `request'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/test.rb:230:in `process_request'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/test.rb:66:in `post'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/forwardable.rb:201:in `post'
/Users/cowboyd/Projects/BandFrame/stripe-rails/test/callbacks_spec.rb:37:in `block (3 levels) in <main>'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/mocha-0.13.0/lib/mocha/integration/mini_test/version_230_to_2101.rb:36:in `run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:787:in `block in _run_suite'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:780:in `map'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:780:in `_run_suite'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `block in _run_suites'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `map'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `_run_suites'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:746:in `_run_anything'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:909:in `run_tests'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:896:in `block in _run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:895:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:895:in `_run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:884:in `run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:664:in `block in autorun'
Completed 201 Created in 10ms (Views: 5.3ms)


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-16 13:22:52 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 12ms (Views: 0.2ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-16 13:22:52 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
undefined method `call' for #<Array:0x0000010178d550>
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:21:in `block in run_noncritical_callbacks'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:19:in `each'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:19:in `run_noncritical_callbacks'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:8:in `block in dispatch'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:6:in `tap'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:6:in `dispatch'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/controllers/stripe/events_controller.rb:6:in `create'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:403:in `_run__2988346282204193060__process_action__782599064157152559__callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal.rb:203:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal.rb:246:in `block in action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:36:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:30:in `method_missing'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/etag.rb:23:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/conditionalget.rb:35:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:205:in `context'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:200:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/cookies.rb:339:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__1097014849760654588__call__4273812486069812583__callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/runtime.rb:17:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/lock.rb:15:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/mock_session.rb:30:in `request'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/test.rb:230:in `process_request'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/test.rb:66:in `post'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/forwardable.rb:201:in `post'
/Users/cowboyd/Projects/BandFrame/stripe-rails/test/callbacks_spec.rb:37:in `block (3 levels) in <main>'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/mocha-0.13.0/lib/mocha/integration/mini_test/version_230_to_2101.rb:36:in `run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:787:in `block in _run_suite'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:780:in `map'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:780:in `_run_suite'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `block in _run_suites'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `map'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `_run_suites'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:746:in `_run_anything'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:909:in `run_tests'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:896:in `block in _run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:895:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:895:in `_run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:884:in `run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:664:in `block in autorun'
Completed 201 Created in 42ms (Views: 37.8ms)


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-16 13:23:04 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 12ms (Views: 0.2ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-16 13:23:04 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
undefined method `call' for #<Array:0x00000100f4a140>
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:21:in `block in run_noncritical_callbacks'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:19:in `each'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:19:in `run_noncritical_callbacks'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:8:in `block in dispatch'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:6:in `tap'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:6:in `dispatch'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/controllers/stripe/events_controller.rb:6:in `create'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:403:in `_run__1564129105934242046__process_action__4487630310450732647__callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal.rb:203:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal.rb:246:in `block in action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:36:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:30:in `method_missing'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/etag.rb:23:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/conditionalget.rb:35:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:205:in `context'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:200:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/cookies.rb:339:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__3414412619318509613__call__4480589958193853326__callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/runtime.rb:17:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/lock.rb:15:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/mock_session.rb:30:in `request'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/test.rb:230:in `process_request'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/test.rb:66:in `post'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/forwardable.rb:201:in `post'
/Users/cowboyd/Projects/BandFrame/stripe-rails/test/callbacks_spec.rb:37:in `block (3 levels) in <main>'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/mocha-0.13.0/lib/mocha/integration/mini_test/version_230_to_2101.rb:36:in `run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:787:in `block in _run_suite'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:780:in `map'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:780:in `_run_suite'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `block in _run_suites'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `map'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `_run_suites'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:746:in `_run_anything'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:909:in `run_tests'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:896:in `block in _run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:895:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:895:in `_run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:884:in `run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:664:in `block in autorun'
Completed 201 Created in 9ms (Views: 3.4ms)


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-16 13:24:05 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 10ms (Views: 0.2ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-16 13:24:05 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
undefined method `call' for #<Array:0x0000010289ddb8>
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:21:in `block in run_noncritical_callbacks'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:19:in `each'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:19:in `run_noncritical_callbacks'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:8:in `block in dispatch'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:6:in `tap'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:6:in `dispatch'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/controllers/stripe/events_controller.rb:6:in `create'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:403:in `_run__2390713196986974204__process_action__1389627371698588962__callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal.rb:203:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal.rb:246:in `block in action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:36:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:30:in `method_missing'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/etag.rb:23:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/conditionalget.rb:35:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:205:in `context'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:200:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/cookies.rb:339:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__1976753766028028534__call__2636249819067579591__callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/runtime.rb:17:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/lock.rb:15:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/mock_session.rb:30:in `request'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/test.rb:230:in `process_request'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/test.rb:66:in `post'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/forwardable.rb:201:in `post'
/Users/cowboyd/Projects/BandFrame/stripe-rails/test/callbacks_spec.rb:37:in `block (3 levels) in <main>'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/mocha-0.13.0/lib/mocha/integration/mini_test/version_230_to_2101.rb:36:in `run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:787:in `block in _run_suite'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:780:in `map'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:780:in `_run_suite'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `block in _run_suites'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `map'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `_run_suites'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:746:in `_run_anything'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:909:in `run_tests'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:896:in `block in _run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:895:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:895:in `_run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:884:in `run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:664:in `block in autorun'
Completed 201 Created in 8ms (Views: 3.3ms)


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-16 13:24:25 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 18ms (Views: 0.8ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-16 13:24:26 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
undefined method `call' for #<Array:0x00000100f9b068>
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:21:in `block in run_noncritical_callbacks'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:19:in `each'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:19:in `run_noncritical_callbacks'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:8:in `block in dispatch'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:6:in `tap'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:6:in `dispatch'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/controllers/stripe/events_controller.rb:6:in `create'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:403:in `_run__4303974059140097458__process_action__3639247976461249958__callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal.rb:203:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal.rb:246:in `block in action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:36:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:30:in `method_missing'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/etag.rb:23:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/conditionalget.rb:35:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:205:in `context'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:200:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/cookies.rb:339:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__837982735614377508__call__1798880737321484132__callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/runtime.rb:17:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/lock.rb:15:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/mock_session.rb:30:in `request'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/test.rb:230:in `process_request'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/test.rb:66:in `post'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/forwardable.rb:201:in `post'
/Users/cowboyd/Projects/BandFrame/stripe-rails/test/callbacks_spec.rb:37:in `block (3 levels) in <main>'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/mocha-0.13.0/lib/mocha/integration/mini_test/version_230_to_2101.rb:36:in `run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:787:in `block in _run_suite'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:780:in `map'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:780:in `_run_suite'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `block in _run_suites'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `map'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `_run_suites'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:746:in `_run_anything'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:909:in `run_tests'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:896:in `block in _run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:895:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:895:in `_run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:884:in `run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:664:in `block in autorun'
Completed 201 Created in 9ms (Views: 4.2ms)


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-16 13:24:49 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 11ms (Views: 0.2ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-16 13:24:49 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
undefined method `call' for #<Array:0x00000100dcc8b8>
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:22:in `block in run_noncritical_callbacks'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:20:in `each'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:20:in `run_noncritical_callbacks'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:8:in `block in dispatch'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:6:in `tap'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:6:in `dispatch'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/controllers/stripe/events_controller.rb:6:in `create'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:403:in `_run__539317733913545008__process_action__2473474619231404005__callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal.rb:203:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal.rb:246:in `block in action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:36:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:30:in `method_missing'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/etag.rb:23:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/conditionalget.rb:35:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:205:in `context'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:200:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/cookies.rb:339:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__2914647465307003143__call__3201890134544782519__callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/runtime.rb:17:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/lock.rb:15:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/mock_session.rb:30:in `request'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/test.rb:230:in `process_request'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/test.rb:66:in `post'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/forwardable.rb:201:in `post'
/Users/cowboyd/Projects/BandFrame/stripe-rails/test/callbacks_spec.rb:37:in `block (3 levels) in <main>'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/mocha-0.13.0/lib/mocha/integration/mini_test/version_230_to_2101.rb:36:in `run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:787:in `block in _run_suite'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:780:in `map'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:780:in `_run_suite'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `block in _run_suites'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `map'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `_run_suites'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:746:in `_run_anything'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:909:in `run_tests'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:896:in `block in _run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:895:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:895:in `_run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:884:in `run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:664:in `block in autorun'
Completed 201 Created in 8ms (Views: 3.3ms)


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-16 13:25:19 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 9ms (Views: 0.2ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-16 13:25:19 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
undefined method `call' for #<Array:0x00000101695058>
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:22:in `block in run_noncritical_callbacks'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:20:in `each'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:20:in `run_noncritical_callbacks'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:8:in `block in dispatch'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:6:in `tap'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:6:in `dispatch'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/controllers/stripe/events_controller.rb:6:in `create'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:403:in `_run__3768452712959766957__process_action__2392138248359512645__callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal.rb:203:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal.rb:246:in `block in action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:36:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:30:in `method_missing'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/etag.rb:23:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/conditionalget.rb:35:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:205:in `context'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:200:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/cookies.rb:339:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__1424743681235760295__call__2039435991687287796__callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/runtime.rb:17:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/lock.rb:15:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/mock_session.rb:30:in `request'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/test.rb:230:in `process_request'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/test.rb:66:in `post'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/forwardable.rb:201:in `post'
/Users/cowboyd/Projects/BandFrame/stripe-rails/test/callbacks_spec.rb:37:in `block (3 levels) in <main>'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/mocha-0.13.0/lib/mocha/integration/mini_test/version_230_to_2101.rb:36:in `run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:787:in `block in _run_suite'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:780:in `map'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:780:in `_run_suite'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `block in _run_suites'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `map'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `_run_suites'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:746:in `_run_anything'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:909:in `run_tests'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:896:in `block in _run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:895:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:895:in `_run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:884:in `run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:664:in `block in autorun'
Completed 201 Created in 11ms (Views: 3.9ms)


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-19 09:16:22 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 43ms (Views: 0.2ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 09:16:22 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
undefined method `call' for #<Array:0x00000100faa9f0>
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:22:in `block in run_noncritical_callbacks'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:20:in `each'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:20:in `run_noncritical_callbacks'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:8:in `block in dispatch'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:6:in `tap'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:6:in `dispatch'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/controllers/stripe/events_controller.rb:6:in `create'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:403:in `_run__2471903761559625781__process_action__3486677933310794032__callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal.rb:203:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal.rb:246:in `block in action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:36:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:30:in `method_missing'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/etag.rb:23:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/conditionalget.rb:35:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:205:in `context'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:200:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/cookies.rb:339:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__459946549503789004__call__664628351776482424__callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/runtime.rb:17:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/lock.rb:15:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/mock_session.rb:30:in `request'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/test.rb:230:in `process_request'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/test.rb:66:in `post'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/forwardable.rb:201:in `post'
test/callbacks_spec.rb:37:in `block (3 levels) in <main>'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/mocha-0.13.0/lib/mocha/integration/mini_test/version_230_to_2101.rb:36:in `run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:787:in `block in _run_suite'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:780:in `map'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:780:in `_run_suite'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `block in _run_suites'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `map'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `_run_suites'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:746:in `_run_anything'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:909:in `run_tests'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:896:in `block in _run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:895:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:895:in `_run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:884:in `run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:664:in `block in autorun'
Completed 201 Created in 8ms (Views: 3.2ms)


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-19 12:43:16 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 44ms (Views: 0.3ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 12:43:16 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
undefined method `call' for #<Array:0x00000100bc5f88>
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:22:in `block in run_noncritical_callbacks'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:20:in `each'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:20:in `run_noncritical_callbacks'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:8:in `block in dispatch'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:6:in `tap'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:6:in `dispatch'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/controllers/stripe/events_controller.rb:6:in `create'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:403:in `_run__4550222882954656595__process_action__2566084800333845195__callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal.rb:203:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal.rb:246:in `block in action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:36:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:30:in `method_missing'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/etag.rb:23:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/conditionalget.rb:35:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:205:in `context'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:200:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/cookies.rb:339:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__2841053546713127794__call__3970132322072913245__callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/runtime.rb:17:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/lock.rb:15:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/mock_session.rb:30:in `request'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/test.rb:230:in `process_request'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/test.rb:66:in `post'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/forwardable.rb:201:in `post'
test/callbacks_spec.rb:37:in `block (3 levels) in <main>'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/mocha-0.13.0/lib/mocha/integration/mini_test/version_230_to_2101.rb:36:in `run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:787:in `block in _run_suite'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:780:in `map'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:780:in `_run_suite'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `block in _run_suites'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `map'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `_run_suites'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:746:in `_run_anything'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:909:in `run_tests'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:896:in `block in _run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:895:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:895:in `_run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:884:in `run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:664:in `block in autorun'
Completed 201 Created in 7ms (Views: 3.5ms)


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-19 12:43:25 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 9ms (Views: 0.2ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 12:43:25 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
undefined method `call' for #<Array:0x0000010173ddc0>
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:22:in `block in run_noncritical_callbacks'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:20:in `each'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:20:in `run_noncritical_callbacks'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:8:in `block in dispatch'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:6:in `tap'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:6:in `dispatch'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/controllers/stripe/events_controller.rb:6:in `create'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:403:in `_run__169775627516181834__process_action__953540878815799149__callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal.rb:203:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal.rb:246:in `block in action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:36:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:30:in `method_missing'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/etag.rb:23:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/conditionalget.rb:35:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:205:in `context'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:200:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/cookies.rb:339:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__1857656632858880594__call__64496618166891183__callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/runtime.rb:17:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/lock.rb:15:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/mock_session.rb:30:in `request'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/test.rb:230:in `process_request'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/test.rb:66:in `post'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/forwardable.rb:201:in `post'
/Users/cowboyd/Projects/BandFrame/stripe-rails/test/callbacks_spec.rb:37:in `block (3 levels) in <main>'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/mocha-0.13.0/lib/mocha/integration/mini_test/version_230_to_2101.rb:36:in `run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:787:in `block in _run_suite'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:780:in `map'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:780:in `_run_suite'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `block in _run_suites'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `map'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `_run_suites'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:746:in `_run_anything'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:909:in `run_tests'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:896:in `block in _run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:895:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:895:in `_run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:884:in `run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:664:in `block in autorun'
Completed 201 Created in 7ms (Views: 3.2ms)


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-19 12:47:45 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 10ms (Views: 0.2ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 12:47:45 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
undefined method `call' for #<Array:0x000001011651a0>
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:22:in `block in run_noncritical_callbacks'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:20:in `each'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:20:in `run_noncritical_callbacks'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:8:in `block in dispatch'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:6:in `tap'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:6:in `dispatch'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/controllers/stripe/events_controller.rb:6:in `create'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:403:in `_run__224139018784079489__process_action__2092409089870777184__callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal.rb:203:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal.rb:246:in `block in action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:36:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:30:in `method_missing'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/etag.rb:23:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/conditionalget.rb:35:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:205:in `context'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:200:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/cookies.rb:339:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__29565008828002336__call__208638813256628518__callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/runtime.rb:17:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/lock.rb:15:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/mock_session.rb:30:in `request'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/test.rb:230:in `process_request'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/test.rb:66:in `post'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/forwardable.rb:201:in `post'
/Users/cowboyd/Projects/BandFrame/stripe-rails/test/callbacks_spec.rb:37:in `block (3 levels) in <main>'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/mocha-0.13.0/lib/mocha/integration/mini_test/version_230_to_2101.rb:36:in `run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:787:in `block in _run_suite'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:780:in `map'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:780:in `_run_suite'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `block in _run_suites'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `map'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `_run_suites'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:746:in `_run_anything'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:909:in `run_tests'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:896:in `block in _run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:895:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:895:in `_run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:884:in `run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:664:in `block in autorun'
Completed 201 Created in 7ms (Views: 3.3ms)


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-19 12:48:13 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 9ms (Views: 0.2ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 12:48:13 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
undefined method `call' for #<Array:0x00000102ab1190>
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:22:in `block in run_noncritical_callbacks'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:20:in `each'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:20:in `run_noncritical_callbacks'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:8:in `block in dispatch'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:6:in `tap'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:6:in `dispatch'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/controllers/stripe/events_controller.rb:6:in `create'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:403:in `_run__2959941086501932452__process_action__3414196833241997657__callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal.rb:203:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal.rb:246:in `block in action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:36:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:30:in `method_missing'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/etag.rb:23:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/conditionalget.rb:35:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:205:in `context'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:200:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/cookies.rb:339:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__600815039354204293__call__1637839736658709373__callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/runtime.rb:17:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/lock.rb:15:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/mock_session.rb:30:in `request'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/test.rb:230:in `process_request'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/test.rb:66:in `post'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/forwardable.rb:201:in `post'
/Users/cowboyd/Projects/BandFrame/stripe-rails/test/callbacks_spec.rb:38:in `block (3 levels) in <main>'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/mocha-0.13.0/lib/mocha/integration/mini_test/version_230_to_2101.rb:36:in `run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:787:in `block in _run_suite'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:780:in `map'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:780:in `_run_suite'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `block in _run_suites'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `map'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `_run_suites'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:746:in `_run_anything'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:909:in `run_tests'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:896:in `block in _run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:895:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:895:in `_run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:884:in `run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:664:in `block in autorun'
Completed 201 Created in 8ms (Views: 3.4ms)


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-19 12:48:41 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 9ms (Views: 0.2ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 12:48:41 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
undefined method `call' for #<Array:0x00000102962230>
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:22:in `block in run_noncritical_callbacks'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:20:in `each'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:20:in `run_noncritical_callbacks'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:8:in `block in dispatch'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:6:in `tap'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:6:in `dispatch'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/controllers/stripe/events_controller.rb:6:in `create'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:403:in `_run__185033975148757588__process_action__4190265643257445739__callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal.rb:203:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal.rb:246:in `block in action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:36:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:30:in `method_missing'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/etag.rb:23:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/conditionalget.rb:35:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:205:in `context'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:200:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/cookies.rb:339:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__2496077555627951879__call__3404891212276371374__callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/runtime.rb:17:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/lock.rb:15:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/mock_session.rb:30:in `request'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/test.rb:230:in `process_request'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/test.rb:66:in `post'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/forwardable.rb:201:in `post'
/Users/cowboyd/Projects/BandFrame/stripe-rails/test/callbacks_spec.rb:38:in `block (3 levels) in <main>'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/mocha-0.13.0/lib/mocha/integration/mini_test/version_230_to_2101.rb:36:in `run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:787:in `block in _run_suite'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:780:in `map'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:780:in `_run_suite'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `block in _run_suites'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `map'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `_run_suites'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:746:in `_run_anything'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:909:in `run_tests'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:896:in `block in _run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:895:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:895:in `_run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:884:in `run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:664:in `block in autorun'
Completed 201 Created in 9ms (Views: 3.2ms)


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-19 12:49:14 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 20ms (Views: 0.3ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 12:49:14 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
undefined method `call' for #<Array:0x00000102986f90>
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:21:in `block in run_noncritical_callbacks'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:19:in `each'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:19:in `run_noncritical_callbacks'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:8:in `block in dispatch'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:6:in `tap'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:6:in `dispatch'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/controllers/stripe/events_controller.rb:6:in `create'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:403:in `_run__282458794700862517__process_action__608798098665341186__callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal.rb:203:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal.rb:246:in `block in action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:36:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:30:in `method_missing'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/etag.rb:23:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/conditionalget.rb:35:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:205:in `context'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:200:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/cookies.rb:339:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__4248444800773730980__call__1357799181055811758__callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/runtime.rb:17:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/lock.rb:15:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/mock_session.rb:30:in `request'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/test.rb:230:in `process_request'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/test.rb:66:in `post'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/forwardable.rb:201:in `post'
/Users/cowboyd/Projects/BandFrame/stripe-rails/test/callbacks_spec.rb:38:in `block (3 levels) in <main>'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/mocha-0.13.0/lib/mocha/integration/mini_test/version_230_to_2101.rb:36:in `run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:787:in `block in _run_suite'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:780:in `map'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:780:in `_run_suite'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `block in _run_suites'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `map'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `_run_suites'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:746:in `_run_anything'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:909:in `run_tests'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:896:in `block in _run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:895:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:895:in `_run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:884:in `run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:664:in `block in autorun'
Completed 201 Created in 12ms (Views: 4.3ms)


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-19 12:49:25 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 9ms (Views: 0.2ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 12:49:25 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
undefined method `call' for #<Array:0x000001016f9850>
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:21:in `block in run_noncritical_callbacks'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:19:in `each'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:19:in `run_noncritical_callbacks'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:8:in `block in dispatch'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:6:in `tap'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:6:in `dispatch'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/controllers/stripe/events_controller.rb:6:in `create'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:403:in `_run__4527804435241009238__process_action__1883519400864020253__callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal.rb:203:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal.rb:246:in `block in action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:36:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:30:in `method_missing'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/etag.rb:23:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/conditionalget.rb:35:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:205:in `context'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:200:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/cookies.rb:339:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__369427928442159764__call__2748933439885416747__callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/runtime.rb:17:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/lock.rb:15:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/mock_session.rb:30:in `request'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/test.rb:230:in `process_request'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/test.rb:66:in `post'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/forwardable.rb:201:in `post'
/Users/cowboyd/Projects/BandFrame/stripe-rails/test/callbacks_spec.rb:39:in `block (3 levels) in <main>'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/mocha-0.13.0/lib/mocha/integration/mini_test/version_230_to_2101.rb:36:in `run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:787:in `block in _run_suite'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:780:in `map'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:780:in `_run_suite'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `block in _run_suites'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `map'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `_run_suites'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:746:in `_run_anything'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:909:in `run_tests'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:896:in `block in _run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:895:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:895:in `_run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:884:in `run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:664:in `block in autorun'
Completed 201 Created in 7ms (Views: 3.2ms)


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-19 12:49:46 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 9ms (Views: 0.2ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 12:49:46 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
undefined method `call' for #<Array:0x000001014d0b78>
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:21:in `block in run_noncritical_callbacks'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:19:in `each'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:19:in `run_noncritical_callbacks'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:8:in `block in dispatch'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:6:in `tap'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:6:in `dispatch'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/controllers/stripe/events_controller.rb:6:in `create'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:403:in `_run__12685648457954862__process_action__4107305949835261099__callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal.rb:203:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal.rb:246:in `block in action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:36:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:30:in `method_missing'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/etag.rb:23:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/conditionalget.rb:35:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:205:in `context'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:200:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/cookies.rb:339:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__488480979717105797__call__2050011654227084400__callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/runtime.rb:17:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/lock.rb:15:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/mock_session.rb:30:in `request'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/test.rb:230:in `process_request'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/test.rb:66:in `post'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/forwardable.rb:201:in `post'
/Users/cowboyd/Projects/BandFrame/stripe-rails/test/callbacks_spec.rb:39:in `block (3 levels) in <main>'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/mocha-0.13.0/lib/mocha/integration/mini_test/version_230_to_2101.rb:36:in `run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:787:in `block in _run_suite'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:780:in `map'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:780:in `_run_suite'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `block in _run_suites'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `map'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `_run_suites'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:746:in `_run_anything'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:909:in `run_tests'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:896:in `block in _run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:895:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:895:in `_run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:884:in `run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:664:in `block in autorun'
Completed 201 Created in 7ms (Views: 3.2ms)


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-19 12:50:34 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 10ms (Views: 0.2ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 12:50:34 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 500 Internal Server Error in 3ms


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-19 12:51:25 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 9ms (Views: 0.2ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 12:51:25 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 500 Internal Server Error in 6ms


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-19 12:52:42 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 9ms (Views: 0.2ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 12:52:42 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 201 Created in 8ms (Views: 3.5ms)


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-19 12:53:04 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 10ms (Views: 0.2ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 12:53:04 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 201 Created in 7ms (Views: 3.3ms)


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-19 12:56:13 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 9ms (Views: 0.2ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 12:56:13 -0600
Error occurred while parsing request parameters.
Contents:




Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-19 12:57:31 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 9ms (Views: 0.2ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 12:57:32 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 201 Created in 7ms (Views: 3.2ms)


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-19 12:57:48 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 9ms (Views: 0.2ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 12:57:48 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 201 Created in 7ms (Views: 3.2ms)


Started POST "/stripe/events/" for 127.0.0.1 at 2012-11-19 12:57:48 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_failed", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_failed", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 201 Created in 6ms (Views: 3.2ms)


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-19 12:58:13 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 11ms (Views: 0.2ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 12:58:13 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 201 Created in 7ms (Views: 3.4ms)


Started POST "/stripe/events/" for 127.0.0.1 at 2012-11-19 12:58:13 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_failed", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_failed", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 201 Created in 6ms (Views: 3.3ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 12:58:13 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 500 Internal Server Error in 2ms


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-19 12:59:09 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 9ms (Views: 0.2ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 12:59:09 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 201 Created in 7ms (Views: 3.2ms)


Started POST "/stripe/events/" for 127.0.0.1 at 2012-11-19 12:59:09 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_failed", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_failed", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 201 Created in 7ms (Views: 3.2ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 12:59:09 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 500 Internal Server Error in 3ms


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-19 13:00:59 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 9ms (Views: 0.2ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 13:00:59 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 201 Created in 7ms (Views: 3.2ms)


Started POST "/stripe/events/" for 127.0.0.1 at 2012-11-19 13:00:59 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_failed", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_failed", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 201 Created in 6ms (Views: 3.1ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 13:00:59 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 500 Internal Server Error in 3ms


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-19 13:02:02 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 9ms (Views: 0.2ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 13:02:02 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 201 Created in 7ms (Views: 3.3ms)


Started POST "/stripe/events/" for 127.0.0.1 at 2012-11-19 13:02:02 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_failed", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_failed", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 201 Created in 6ms (Views: 3.1ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 13:02:02 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 500 Internal Server Error in 2ms


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 13:02:02 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 500 Internal Server Error in 2ms


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-19 13:02:19 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 10ms (Views: 0.2ms)


Started POST "/stripe/events/" for 127.0.0.1 at 2012-11-19 13:02:19 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_failed", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_failed", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 201 Created in 7ms (Views: 3.2ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 13:02:19 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 201 Created in 6ms (Views: 3.1ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 13:02:19 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 500 Internal Server Error in 2ms


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 13:02:19 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 500 Internal Server Error in 3ms


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-19 13:03:20 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 10ms (Views: 0.2ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 13:03:20 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 201 Created in 7ms (Views: 3.1ms)


Started POST "/stripe/events/" for 127.0.0.1 at 2012-11-19 13:03:20 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_failed", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_failed", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 201 Created in 6ms (Views: 3.1ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 13:03:20 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 500 Internal Server Error in 3ms


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 13:03:20 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 500 Internal Server Error in 2ms


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-19 13:04:31 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 9ms (Views: 0.2ms)


Started POST "/stripe/events/" for 127.0.0.1 at 2012-11-19 13:04:31 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_failed", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_failed", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 201 Created in 7ms (Views: 3.3ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 13:04:31 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 201 Created in 6ms (Views: 3.2ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 13:04:31 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 500 Internal Server Error in 2ms


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 13:04:31 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
boom!
/Users/cowboyd/Projects/BandFrame/stripe-rails/test/callbacks_spec.rb:64:in `block (5 levels) in <main>'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:22:in `call'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:22:in `block in run_noncritical_callbacks'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:19:in `each'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:19:in `run_noncritical_callbacks'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:8:in `block in dispatch'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:6:in `tap'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:6:in `dispatch'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/controllers/stripe/events_controller.rb:6:in `create'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:403:in `_run__4400932919627586186__process_action__692167851413853806__callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal.rb:203:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal.rb:246:in `block in action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:36:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:30:in `method_missing'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/etag.rb:23:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/conditionalget.rb:35:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:205:in `context'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:200:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/cookies.rb:339:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__1102568672796610146__call__1527660959815671723__callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/runtime.rb:17:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/lock.rb:15:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/mock_session.rb:30:in `request'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/test.rb:230:in `process_request'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/test.rb:66:in `post'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/forwardable.rb:201:in `post'
/Users/cowboyd/Projects/BandFrame/stripe-rails/test/callbacks_spec.rb:70:in `block (3 levels) in <main>'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/mocha-0.13.0/lib/mocha/integration/mini_test/version_230_to_2101.rb:36:in `run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:787:in `block in _run_suite'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:780:in `map'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:780:in `_run_suite'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `block in _run_suites'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `map'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `_run_suites'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:746:in `_run_anything'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:909:in `run_tests'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:896:in `block in _run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:895:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:895:in `_run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:884:in `run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:664:in `block in autorun'
Completed 201 Created in 27ms (Views: 23.4ms)


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-19 13:05:08 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 9ms (Views: 0.2ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 13:05:08 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 201 Created in 7ms (Views: 3.3ms)


Started POST "/stripe/events/" for 127.0.0.1 at 2012-11-19 13:05:08 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_failed", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_failed", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 201 Created in 6ms (Views: 3.2ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 13:05:08 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 500 Internal Server Error in 2ms


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 13:05:08 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
boom!
/Users/cowboyd/Projects/BandFrame/stripe-rails/test/callbacks_spec.rb:64:in `block (5 levels) in <main>'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:22:in `call'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:22:in `block in run_noncritical_callbacks'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:19:in `each'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:19:in `run_noncritical_callbacks'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:8:in `block in dispatch'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:6:in `tap'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:6:in `dispatch'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/controllers/stripe/events_controller.rb:6:in `create'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:403:in `_run__569468117229686099__process_action__2754538260296196207__callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal.rb:203:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal.rb:246:in `block in action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:36:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:30:in `method_missing'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/etag.rb:23:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/conditionalget.rb:35:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:205:in `context'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:200:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/cookies.rb:339:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__1567122000520859229__call__3261172293768143462__callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/runtime.rb:17:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/lock.rb:15:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/mock_session.rb:30:in `request'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/test.rb:230:in `process_request'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/test.rb:66:in `post'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/forwardable.rb:201:in `post'
/Users/cowboyd/Projects/BandFrame/stripe-rails/test/callbacks_spec.rb:70:in `block (3 levels) in <main>'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/mocha-0.13.0/lib/mocha/integration/mini_test/version_230_to_2101.rb:36:in `run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:787:in `block in _run_suite'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:780:in `map'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:780:in `_run_suite'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `block in _run_suites'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `map'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `_run_suites'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:746:in `_run_anything'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:909:in `run_tests'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:896:in `block in _run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:895:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:895:in `_run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:884:in `run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:664:in `block in autorun'
Completed 201 Created in 26ms (Views: 23.1ms)


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-19 13:05:50 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 9ms (Views: 0.2ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 13:05:50 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 201 Created in 9ms (Views: 3.2ms)


Started POST "/stripe/events/" for 127.0.0.1 at 2012-11-19 13:05:50 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_failed", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_failed", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 201 Created in 6ms (Views: 3.1ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 13:05:50 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 500 Internal Server Error in 2ms


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 13:05:50 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
boom!
/Users/cowboyd/Projects/BandFrame/stripe-rails/test/callbacks_spec.rb:64:in `block (5 levels) in <main>'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:22:in `call'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:22:in `block in run_noncritical_callbacks'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:19:in `each'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:19:in `run_noncritical_callbacks'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:8:in `block in dispatch'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:6:in `tap'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:6:in `dispatch'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/controllers/stripe/events_controller.rb:6:in `create'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:403:in `_run__1166236649529845946__process_action__2665753981956256799__callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal.rb:203:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal.rb:246:in `block in action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:36:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:30:in `method_missing'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/etag.rb:23:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/conditionalget.rb:35:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:205:in `context'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:200:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/cookies.rb:339:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__1488167192256054053__call__1717624791861928082__callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/runtime.rb:17:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/lock.rb:15:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/mock_session.rb:30:in `request'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/test.rb:230:in `process_request'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/test.rb:66:in `post'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/forwardable.rb:201:in `post'
/Users/cowboyd/Projects/BandFrame/stripe-rails/test/callbacks_spec.rb:70:in `block (3 levels) in <main>'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/mocha-0.13.0/lib/mocha/integration/mini_test/version_230_to_2101.rb:36:in `run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:787:in `block in _run_suite'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:780:in `map'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:780:in `_run_suite'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `block in _run_suites'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `map'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `_run_suites'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:746:in `_run_anything'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:909:in `run_tests'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:896:in `block in _run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:895:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:895:in `_run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:884:in `run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:664:in `block in autorun'
Completed 201 Created in 6ms (Views: 3.2ms)


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-19 13:06:30 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 10ms (Views: 0.2ms)


Started POST "/stripe/events/" for 127.0.0.1 at 2012-11-19 13:06:30 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_failed", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_failed", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 201 Created in 7ms (Views: 3.3ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 13:06:30 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 201 Created in 8ms (Views: 5.1ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 13:06:30 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 500 Internal Server Error in 3ms


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 13:06:30 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
boom!
/Users/cowboyd/Projects/BandFrame/stripe-rails/test/callbacks_spec.rb:64:in `block (5 levels) in <main>'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:22:in `call'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:22:in `block in run_noncritical_callbacks'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:19:in `each'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:19:in `run_noncritical_callbacks'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:8:in `block in dispatch'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:6:in `tap'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:6:in `dispatch'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/controllers/stripe/events_controller.rb:6:in `create'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:403:in `_run__1498435516047493737__process_action__1859129125406594598__callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal.rb:203:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal.rb:246:in `block in action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:36:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:30:in `method_missing'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/etag.rb:23:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/conditionalget.rb:35:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:205:in `context'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:200:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/cookies.rb:339:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__2777706842396207507__call__4549282002415262533__callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/runtime.rb:17:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/lock.rb:15:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/mock_session.rb:30:in `request'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/test.rb:230:in `process_request'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/test.rb:66:in `post'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/forwardable.rb:201:in `post'
/Users/cowboyd/Projects/BandFrame/stripe-rails/test/callbacks_spec.rb:70:in `block (3 levels) in <main>'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/mocha-0.13.0/lib/mocha/integration/mini_test/version_230_to_2101.rb:36:in `run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:787:in `block in _run_suite'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:780:in `map'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:780:in `_run_suite'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `block in _run_suites'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `map'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `_run_suites'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:746:in `_run_anything'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:909:in `run_tests'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:896:in `block in _run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:895:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:895:in `_run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:884:in `run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:664:in `block in autorun'
Completed 201 Created in 6ms (Views: 3.1ms)


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-19 13:06:55 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 10ms (Views: 0.3ms)


Started POST "/stripe/events/" for 127.0.0.1 at 2012-11-19 13:06:55 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_failed", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_failed", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 201 Created in 7ms (Views: 3.3ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 13:06:55 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 201 Created in 6ms (Views: 3.1ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 13:06:55 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 500 Internal Server Error in 3ms


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 13:06:55 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
boom!
/Users/cowboyd/Projects/BandFrame/stripe-rails/test/callbacks_spec.rb:64:in `block (5 levels) in <main>'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:22:in `call'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:22:in `block in run_noncritical_callbacks'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:19:in `each'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:19:in `run_noncritical_callbacks'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:8:in `block in dispatch'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:6:in `tap'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:6:in `dispatch'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/controllers/stripe/events_controller.rb:6:in `create'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:403:in `_run__1740615236212527776__process_action__2839200823478978926__callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal.rb:203:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal.rb:246:in `block in action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:36:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:30:in `method_missing'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/etag.rb:23:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/conditionalget.rb:35:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:205:in `context'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:200:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/cookies.rb:339:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__40128094926675915__call__1344115862043341302__callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/runtime.rb:17:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/lock.rb:15:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/mock_session.rb:30:in `request'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/test.rb:230:in `process_request'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/test.rb:66:in `post'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/forwardable.rb:201:in `post'
/Users/cowboyd/Projects/BandFrame/stripe-rails/test/callbacks_spec.rb:70:in `block (3 levels) in <main>'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/mocha-0.13.0/lib/mocha/integration/mini_test/version_230_to_2101.rb:36:in `run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:787:in `block in _run_suite'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:780:in `map'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:780:in `_run_suite'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `block in _run_suites'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `map'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `_run_suites'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:746:in `_run_anything'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:909:in `run_tests'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:896:in `block in _run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:895:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:895:in `_run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:884:in `run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:664:in `block in autorun'
Completed 201 Created in 6ms (Views: 3.2ms)


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-19 13:07:22 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 12ms (Views: 0.2ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 13:07:22 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 201 Created in 7ms (Views: 3.6ms)


Started POST "/stripe/events/" for 127.0.0.1 at 2012-11-19 13:07:22 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_failed", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_failed", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 201 Created in 6ms (Views: 3.1ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 13:07:22 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 500 Internal Server Error in 3ms


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 13:07:22 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
boom!
/Users/cowboyd/Projects/BandFrame/stripe-rails/test/callbacks_spec.rb:64:in `block (5 levels) in <main>'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:22:in `call'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:22:in `block in run_noncritical_callbacks'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:19:in `each'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:19:in `run_noncritical_callbacks'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:8:in `block in dispatch'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:6:in `tap'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:6:in `dispatch'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/controllers/stripe/events_controller.rb:6:in `create'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:403:in `_run__2603902726311800528__process_action__1472505275559424011__callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal.rb:203:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal.rb:246:in `block in action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:36:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:30:in `method_missing'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/etag.rb:23:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/conditionalget.rb:35:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:205:in `context'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:200:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/cookies.rb:339:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__992179840038522719__call__590705411357039259__callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/runtime.rb:17:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/lock.rb:15:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/mock_session.rb:30:in `request'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/test.rb:230:in `process_request'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/test.rb:66:in `post'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/forwardable.rb:201:in `post'
/Users/cowboyd/Projects/BandFrame/stripe-rails/test/callbacks_spec.rb:70:in `block (3 levels) in <main>'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/mocha-0.13.0/lib/mocha/integration/mini_test/version_230_to_2101.rb:36:in `run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:787:in `block in _run_suite'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:780:in `map'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:780:in `_run_suite'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `block in _run_suites'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `map'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `_run_suites'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:746:in `_run_anything'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:909:in `run_tests'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:896:in `block in _run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:895:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:895:in `_run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:884:in `run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:664:in `block in autorun'
Completed 201 Created in 7ms (Views: 3.4ms)


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-19 13:08:50 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 9ms (Views: 0.2ms)


Started POST "/stripe/events/" for 127.0.0.1 at 2012-11-19 13:08:50 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_failed", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_failed", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 201 Created in 7ms (Views: 3.3ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 13:08:50 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 201 Created in 7ms (Views: 3.6ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 13:08:50 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 500 Internal Server Error in 3ms


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 13:08:50 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
boom!
/Users/cowboyd/Projects/BandFrame/stripe-rails/test/callbacks_spec.rb:64:in `block (5 levels) in <main>'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:22:in `call'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:22:in `block in run_noncritical_callbacks'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:19:in `each'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:19:in `run_noncritical_callbacks'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:8:in `block in dispatch'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:6:in `tap'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:6:in `dispatch'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/controllers/stripe/events_controller.rb:6:in `create'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:403:in `_run__2876815392256661556__process_action__4578472044075296933__callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal.rb:203:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal.rb:246:in `block in action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:36:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:30:in `method_missing'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/etag.rb:23:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/conditionalget.rb:35:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:205:in `context'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:200:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/cookies.rb:339:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__3735228894058024961__call__102569497739644314__callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/runtime.rb:17:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/lock.rb:15:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/mock_session.rb:30:in `request'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/test.rb:230:in `process_request'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/test.rb:66:in `post'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/forwardable.rb:201:in `post'
/Users/cowboyd/Projects/BandFrame/stripe-rails/test/callbacks_spec.rb:70:in `block (3 levels) in <main>'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/mocha-0.13.0/lib/mocha/integration/mini_test/version_230_to_2101.rb:36:in `run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:787:in `block in _run_suite'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:780:in `map'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:780:in `_run_suite'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `block in _run_suites'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `map'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `_run_suites'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:746:in `_run_anything'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:909:in `run_tests'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:896:in `block in _run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:895:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:895:in `_run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:884:in `run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:664:in `block in autorun'
Completed 201 Created in 27ms (Views: 22.9ms)


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-19 13:09:02 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 9ms (Views: 0.2ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 13:09:02 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 201 Created in 7ms (Views: 3.4ms)


Started POST "/stripe/events/" for 127.0.0.1 at 2012-11-19 13:09:02 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_failed", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_failed", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 201 Created in 6ms (Views: 3.2ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 13:09:02 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 500 Internal Server Error in 2ms


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 13:09:02 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
boom!
/Users/cowboyd/Projects/BandFrame/stripe-rails/test/callbacks_spec.rb:64:in `block (5 levels) in <main>'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:22:in `call'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:22:in `block in run_noncritical_callbacks'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:19:in `each'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:19:in `run_noncritical_callbacks'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:8:in `block in dispatch'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:6:in `tap'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:6:in `dispatch'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/controllers/stripe/events_controller.rb:6:in `create'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:403:in `_run__1586867429682021031__process_action__2288703606062346105__callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal.rb:203:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal.rb:246:in `block in action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:36:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:30:in `method_missing'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/etag.rb:23:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/conditionalget.rb:35:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:205:in `context'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:200:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/cookies.rb:339:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__366134555278027613__call__99883895639146574__callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/runtime.rb:17:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/lock.rb:15:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/mock_session.rb:30:in `request'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/test.rb:230:in `process_request'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/test.rb:66:in `post'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/forwardable.rb:201:in `post'
/Users/cowboyd/Projects/BandFrame/stripe-rails/test/callbacks_spec.rb:70:in `block (3 levels) in <main>'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/mocha-0.13.0/lib/mocha/integration/mini_test/version_230_to_2101.rb:36:in `run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:787:in `block in _run_suite'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:780:in `map'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:780:in `_run_suite'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `block in _run_suites'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `map'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `_run_suites'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:746:in `_run_anything'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:909:in `run_tests'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:896:in `block in _run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:895:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:895:in `_run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:884:in `run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:664:in `block in autorun'
Completed 201 Created in 26ms (Views: 23.2ms)


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-19 13:12:04 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 10ms (Views: 0.2ms)


Started POST "/stripe/events/" for 127.0.0.1 at 2012-11-19 13:12:04 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_failed", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_failed", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 201 Created in 8ms (Views: 3.3ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 13:12:04 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 201 Created in 6ms (Views: 3.2ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 13:12:04 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 500 Internal Server Error in 2ms


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 13:12:04 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
boom!
/Users/cowboyd/Projects/BandFrame/stripe-rails/test/callbacks_spec.rb:64:in `block (5 levels) in <main>'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:22:in `call'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:22:in `block in run_noncritical_callbacks'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:19:in `each'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:19:in `run_noncritical_callbacks'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:8:in `block in dispatch'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:6:in `tap'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:6:in `dispatch'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/controllers/stripe/events_controller.rb:6:in `create'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:403:in `_run__2011098622714615804__process_action__1852089239653209222__callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal.rb:203:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal.rb:246:in `block in action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:36:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:30:in `method_missing'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/etag.rb:23:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/conditionalget.rb:35:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:205:in `context'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:200:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/cookies.rb:339:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__2541114008883932884__call__809568144871104536__callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/runtime.rb:17:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/lock.rb:15:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/mock_session.rb:30:in `request'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/test.rb:230:in `process_request'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/test.rb:66:in `post'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/forwardable.rb:201:in `post'
/Users/cowboyd/Projects/BandFrame/stripe-rails/test/callbacks_spec.rb:70:in `block (3 levels) in <main>'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/mocha-0.13.0/lib/mocha/integration/mini_test/version_230_to_2101.rb:36:in `run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:787:in `block in _run_suite'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:780:in `map'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:780:in `_run_suite'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `block in _run_suites'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `map'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `_run_suites'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:746:in `_run_anything'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:909:in `run_tests'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:896:in `block in _run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:895:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:895:in `_run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:884:in `run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:664:in `block in autorun'
Completed 201 Created in 7ms (Views: 3.3ms)


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-19 13:12:29 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 10ms (Views: 0.2ms)


Started POST "/stripe/events/" for 127.0.0.1 at 2012-11-19 13:12:29 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_failed", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_failed", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 201 Created in 7ms (Views: 3.2ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 13:12:29 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 201 Created in 6ms (Views: 3.0ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 13:12:29 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 500 Internal Server Error in 2ms


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 13:12:29 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
boom!
/Users/cowboyd/Projects/BandFrame/stripe-rails/test/callbacks_spec.rb:64:in `block (5 levels) in <main>'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:21:in `call'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:21:in `block in run_noncritical_callbacks'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:19:in `each'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:19:in `run_noncritical_callbacks'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:8:in `block in dispatch'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:6:in `tap'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:6:in `dispatch'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/controllers/stripe/events_controller.rb:6:in `create'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:403:in `_run__2141013554141124526__process_action__3206647198823689789__callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal.rb:203:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal.rb:246:in `block in action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:36:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:30:in `method_missing'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/etag.rb:23:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/conditionalget.rb:35:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:205:in `context'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:200:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/cookies.rb:339:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__1148285771282474245__call__222439971547601819__callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/runtime.rb:17:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/lock.rb:15:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/mock_session.rb:30:in `request'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/test.rb:230:in `process_request'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/test.rb:66:in `post'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/forwardable.rb:201:in `post'
/Users/cowboyd/Projects/BandFrame/stripe-rails/test/callbacks_spec.rb:70:in `block (3 levels) in <main>'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/mocha-0.13.0/lib/mocha/integration/mini_test/version_230_to_2101.rb:36:in `run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:787:in `block in _run_suite'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:780:in `map'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:780:in `_run_suite'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `block in _run_suites'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `map'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `_run_suites'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:746:in `_run_anything'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:909:in `run_tests'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:896:in `block in _run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:895:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:895:in `_run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:884:in `run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:664:in `block in autorun'
Completed 201 Created in 6ms (Views: 3.1ms)


Started GET "/stripe/ping" for 127.0.0.1 at 2012-11-19 13:12:48 -0600
Processing by Stripe::PingsController#show as JSON
  Parameters: {"ping"=>{}}
Completed 200 OK in 38ms (Views: 0.3ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 13:12:48 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 201 Created in 7ms (Views: 3.3ms)


Started POST "/stripe/events/" for 127.0.0.1 at 2012-11-19 13:12:48 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_failed", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_failed", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 201 Created in 6ms (Views: 3.2ms)


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 13:12:48 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
Completed 500 Internal Server Error in 3ms


Started POST "/stripe/events" for 127.0.0.1 at 2012-11-19 13:12:48 -0600
Processing by Stripe::EventsController#create as JSON
  Parameters: {"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}, "event"=>{"type"=>"invoice.payment_succeeded", "livemode"=>false, "pending_webhooks"=>0, "created"=>1352910508, "object"=>"event", "id"=>"evt_0jcGFxHNsrDTj4", "data"=>{"object"=>{"starting_balance"=>0, "ending_balance"=>0, "paid"=>true, "attempted"=>true, "total"=>6999, "lines"=>{"object"=>"list", "count"=>1, "data"=>[{"type"=>"subscription", "plan"=>{"livemode"=>false, "object"=>"plan", "interval_count"=>1, "amount"=>6999, "name"=>"BandFrame PRO Annual", "currency"=>"usd", "id"=>"yearly", "interval"=>"year", "trial_period_days"=>nil}, "livemode"=>false, "object"=>"line_item", "description"=>nil, "amount"=>6999, "currency"=>"usd", "period"=>{"end"=>1384446507, "start"=>1352910507}, "id"=>"su_0jcGpDYAkeNj0a", "proration"=>false, "quantity"=>1}], "url"=>"/v1/invoices/in_0jcG7zz2RtscPB/lines"}, "subtotal"=>6999, "livemode"=>false, "period_start"=>1352910503, "charge"=>"ch_0jcGRmThyuRYyh", "object"=>"invoice", "customer"=>"cus_0jcFnB3UIIiicv", "period_end"=>1352910507, "discount"=>nil, "next_payment_attempt"=>nil, "currency"=>"usd", "date"=>1352910507, "closed"=>true, "id"=>"in_0jcG7zz2RtscPB", "attempt_count"=>0, "amount_due"=>6999}}}}
boom!
test/callbacks_spec.rb:64:in `block (5 levels) in <main>'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:21:in `call'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:21:in `block in run_noncritical_callbacks'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:19:in `each'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:19:in `run_noncritical_callbacks'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:8:in `block in dispatch'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:6:in `tap'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/models/stripe/event.rb:6:in `dispatch'
/Users/cowboyd/Projects/BandFrame/stripe-rails/app/controllers/stripe/events_controller.rb:6:in `create'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:403:in `_run__3995734000383919443__process_action__1629075072946609793__callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal.rb:203:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_controller/metal.rb:246:in `block in action'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:36:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:30:in `method_missing'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/etag.rb:23:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/conditionalget.rb:35:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:205:in `context'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:200:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/cookies.rb:339:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__4258354522730161727__call__2332093232773101883__callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/runtime.rb:17:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/lock.rb:15:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/mock_session.rb:30:in `request'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/test.rb:230:in `process_request'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-test-0.6.2/lib/rack/test.rb:66:in `post'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/forwardable.rb:201:in `post'
test/callbacks_spec.rb:70:in `block (3 levels) in <main>'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/mocha-0.13.0/lib/mocha/integration/mini_test/version_230_to_2101.rb:36:in `run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:787:in `block in _run_suite'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:780:in `map'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:780:in `_run_suite'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `block in _run_suites'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `map'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:770:in `_run_suites'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:746:in `_run_anything'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:909:in `run_tests'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:896:in `block in _run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:895:in `each'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:895:in `_run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:884:in `run'
/Users/cowboyd/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:664:in `block in autorun'
Completed 201 Created in 7ms (Views: 3.4ms)
